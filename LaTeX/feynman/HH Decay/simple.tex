\documentclass[border={2pt 2pt 2pt 2pt}]{standalone}
\usepackage{feynmp}

\DeclareGraphicsRule{*}{mps}{*}{}
\makeatletter
\def\endfmffile{%
  \fmfcmd{\p@rcent\space the end.^^J%
          end.^^J%
          endinput;}%
  \if@fmfio
    \immediate\closeout\@outfmf
  \fi
%  \ifnum\pdfshellescape=\@ne
	\ifnum\pdfshellescape>\z@
    \immediate\write18{mpost \thefmffile}%
  \fi}
\makeatother

\begin{document}
%\maketitle

\begin{fmffile}{higgs1}
\begin{fmfgraph}(150,150)
    \fmfstraight
    \fmfleft{i1}
    \fmfright{o1,o2,o3,o4}
    \fmf{dashes}{i1,v1}
    \fmf{boson}{v1,v21}
    \fmf{boson}{v1,v22}
    \fmf{fermion}{o1,v21,o2}
    \fmf{fermion}{o3,v22,o4}
\end{fmfgraph}
\end{fmffile}

\end{document}

